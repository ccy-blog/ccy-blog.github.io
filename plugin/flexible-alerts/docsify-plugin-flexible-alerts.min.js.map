{"version":3,"file":"docsify-plugin-flexible-alerts.min.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","// eslint-disable-next-line no-unused-vars\nimport styles from './style.scss';\n\n(function () {\n  const CONFIG = {\n    style: 'callout',\n    note: {\n      label: 'Note',\n      icon: 'icon-note',\n      className: 'note'\n    },\n    tip: {\n      label: 'Tip',\n      icon: 'icon-tip',\n      className: 'tip'\n    },\n    warning: {\n      label: 'Warning',\n      icon: 'icon-warning',\n      className: 'warning'\n    },\n    attention: {\n      label: 'Attention',\n      icon: 'icon-attention',\n      className: 'attention'\n    },\n    // To support further keys in plugin we do an automated mapping between alert types.\n    typeMappings: {\n      info: 'note',\n      danger: 'attention'\n    }\n  };\n\n  function mergeObjects(obj1, obj2, level = 0) {\n    for (const property in obj2) {\n      try {\n        // Property in destination object set; update its value.\n        if (obj2[property].constructor === Object && level < 1) {\n          obj1[property] = mergeObjects(obj1[property], obj2[property], level + 1);\n        } else {\n          obj1[property] = obj2[property];\n        }\n      } catch(e) {\n        // Property in destination object not set; create it and set its value.\n        obj1[property] = obj2[property];\n      }\n    }\n\n    return obj1;\n  }\n\n  const install = function (hook, vm) {\n    const options = mergeObjects(CONFIG, vm.config['flexible-alerts'] || vm.config.flexibleAlerts);\n\n    const findSetting = function findAlertSetting(input, key, fallback, callback) {\n      const match = (input || '').match(new RegExp(`${key}:(([\\\\s\\\\w\\\\u00A0-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF-]*))`));\n\n      if (!match) {\n        return callback ? callback(fallback) : fallback;\n      }\n\n      return callback ? callback(match[1]) : match[1];\n    };\n\n    hook.afterEach(function (html, next) {\n      const modifiedHtml = html.replace(/<\\s*blockquote[^>]*>[\\s]+?(?:<p>)?\\[!(\\w*)((?:\\|[\\w*:[\\s\\w\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF-]*)*?)\\]([\\s\\S]*?)(?:<\\/p>)?<\\s*\\/\\s*blockquote>/g, function (match, key, settings, value) {\n\n        if (!options[key.toLowerCase()] && options.typeMappings[key.toLowerCase()]) {\n          key = options.typeMappings[key.toLowerCase()];\n        }\n\n        const config = options[key.toLowerCase()];\n\n        if (!config) {\n          return match;\n        }\n\n        const style = findSetting(settings, 'style', options.style);\n        let isIconVisible = findSetting(settings, 'iconVisibility', 'visible', (value) => value !== 'hidden');\n        let isLabelVisible = findSetting(settings, 'labelVisibility', 'visible', (value) => value !== 'hidden');\n        let label = findSetting(settings, 'label', config.label);\n        const icon = findSetting(settings, 'icon', config.icon);\n        const className = findSetting(settings, 'className', config.className);\n\n        // Label can be language specific and could be specified via user configuration\n        if (typeof label === 'object') {\n          const foundLabel = Object.keys(label).filter(function (key) {\n            return vm.route.path.indexOf(key) > -1;\n          });\n\n          if (foundLabel && foundLabel.length > 0) {\n            label = label[foundLabel[0]];\n          } else {\n            isLabelVisible = false;\n            isIconVisible = false;\n          }\n        }\n\n        const iconTag = `<span class=\"icon ${icon}\"></span>`;\n        const titleTag = `<p class=\"title\">${isIconVisible ? iconTag : ''}${isLabelVisible ? label : ''}</p>`;\n\n        return (\n          `<div class=\"alert ${style} ${className}\">\n            ${isIconVisible || isLabelVisible ? titleTag : '' }\n            <p>${value}</p>\n          </div>`\n        );\n      });\n\n      next(modifiedHtml);\n    });\n  };\n\n  window.$docsify = window.$docsify || {};\n  window.$docsify.plugins = [].concat(install, window.$docsify.plugins);\n}());\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","CONFIG","note","label","icon","className","tip","warning","attention","typeMappings","info","danger","mergeObjects","obj1","obj2","level","property","constructor","Object","e","window","$docsify","plugins","concat","hook","vm","options","config","flexibleAlerts","findSetting","input","key","fallback","callback","match","RegExp","afterEach","html","next","replace","settings","value","toLowerCase","isIconVisible","isLabelVisible","_typeof","foundLabel","keys","filter","route","path","indexOf","length","iconTag","titleTag"],"mappings":"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"}